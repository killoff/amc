<div>
    <div style="display:inline-block;">
        <h1>В ожидании</h1>
        <!-- ko foreach: queue -->
            <!-- ko if: ['0','2'].indexOf(customer.status) != -1 -->
                <div class="queue-customer" data-bind="template: {name: 'queue-customer-tpl'}"></div>
            <!-- /ko -->
        <!-- /ko -->
    </div>
    <div style="display:inline-block; vertical-align: top;padding-left: 50px;">
        <h1>На приеме</h1>
        <!-- ko foreach: queue -->
            <!-- ko if: ['1'].indexOf(customer.status) != -1 -->
                <div class="queue-customer" data-bind="template: {name: 'queue-customer-tpl'}"></div>
            <!-- /ko -->
        <!-- /ko -->
    </div>
</div>

<script type="text/html" id="queue-customer-tpl">
    <div class="queue-customer-name">
        <a data-bind="attr: {href: customer.url}" target="_blank"><span data-bind="text: customer.name"></span></a>
        <a href="" data-bind="click: $parent.changeStatus.bind($parent)">Change status</a>
        (current is <span data-bind="text: customer.status"></span>)
        <a href="" data-bind="click: $parent.invoice.bind($parent)">Invoice</a>
    </div>
    <div class="queue-schedule">
        <ul data-bind="foreach: events">
            <li class="queue-schedule-item">
                <span data-bind="text: start_at_time" /><sup data-bind="text: minutes + ' min'" /> <span data-bind="text: product_name" /> (<span data-bind="text: lastname + ' ' + firstname" />)
            </li>
        </ul>
    </div>
</script>

<div id="change-status-form" style="display: none;">
    <input type="hidden" id="customer_id">
    <div class="fieldset-wrapper-title">
        <span class="title" data-bind="i18n: 'Change status for'"></span>
        <span class="title customer-name"></span>
        <span class="title">|</span>
        <span class="title" data-bind="i18n: 'current is'"></span> <span class="title customer-status"></span>
    </div>
    <br>
    <div data-bind="foreach: statuses">
        <p>
            <input type="radio" name="status" data-bind="attr: {id: 'status' + status}, value: status"> <label data-bind="attr: {for: 'status' + status}, text: label"></label>
        </p>
    </div>
</div>

<div id="invoice-form" style="display: none;">
    <input type="hidden" data-bind="attr: {name: 'customer_id', value: current_customer_id}" />
    <div class="fieldset-wrapper-title">
        <span class="title" data-bind="i18n: 'Invoice for'"></span>
        <span class="title" data-bind="text: current_customer_name"></span>
    </div>
    <br>
    <div class="admin__table-wrapper">
        <table class="data-table admin__table-primary order-invoice-tables">
            <thead>
            <tr class="headings">
                <th class="col-product"><span>Product</span></th>
                <th class="col-price"><span>Price</span></th>
                <th class="col-price"><span>Date</span></th>
                <th class="col-qty-invoice"><span>Qty to Invoice</span></th>
                <th class="col-discount"><span>Discount Amount</span></th>
                <th class="col-total last"><span>Row Total</span></th>
            </tr>
            </thead>
            <tbody class="even">
            <!-- ko foreach: customer_orders -->
                <!-- ko foreach: items -->
                <tr>
                    <td class="col-product">
                        <div class="product-title" data-bind="text: name">
                        </div>
                        <div class="product-sku-block">
                            <span>SKU:</span> <span data-bind="text: sku"></span>
                        </div>
                    </td>
                    <td class="col-price">
                        <div class="price-excl-tax">
                            <span class="price" data-bind="text: price"></span>
                        </div>
                    </td>
                    <td class="col-date">
                        <a data-bind="attr: {href: $parent.order_url}" target="_blank" title="To the Order">
                            <span data-bind="text: date"></span>
                        </a>
                    </td>
                    <td class="col-qty-invoice">
                        <input data-bind="attr: {name: 'qtys[' + order_item_id + ']', value: qty}" type="text" class="input-text admin__control-text qty-input" />
                    </td>
                    <td class="col-discount"><span class="price" data-bind="text: discount"></span></td>
                    <td class="col-total last">
                        <span class="price" data-bind="text: row_total"></span>
                    </td>
                </tr>
                <!-- /ko -->
            <!-- /ko -->
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="3">&nbsp;</td>
                    <td colspan="3">
                        <button data-bind="click: updateQty" type="button" class="action-default scalable update-button">
                            <span>Update Qty's</span>
                        </button>
                    </td>
                    <td colspan="1">&nbsp;</td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>
